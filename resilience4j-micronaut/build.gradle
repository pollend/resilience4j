apply plugin: 'groovy'
repositories {
    maven { url "https://repo.grails.org/grails/core" }
    maven { url "https://oss.jfrog.org/oss-snapshot-local" }
}
dependencies {

    implementation(platform(libraries.micronaut))
    annotationProcessor(platform(libraries.micronaut))
    testAnnotationProcessor(platform(libraries.micronaut))

    annotationProcessor "io.micronaut:micronaut-inject-java"
    testAnnotationProcessor "io.micronaut:micronaut-inject-groovy"

    compileOnly project(':resilience4j-circuitbreaker')
    compileOnly project(':resilience4j-ratelimiter')
    compileOnly project(':resilience4j-timelimiter')
    compileOnly project(':resilience4j-retry')
    compileOnly project(':resilience4j-rxjava2')
    compileOnly project(':resilience4j-bulkhead')
    compileOnly project(':resilience4j-consumer')
    compileOnly project(':resilience4j-annotations')
    compile project(':resilience4j-framework-common')

    testCompile project(':resilience4j-circuitbreaker')
    testCompile project(':resilience4j-ratelimiter')
    testCompile project(':resilience4j-timelimiter')
    testCompile project(':resilience4j-bulkhead')
    testCompile project(':resilience4j-retry')
    testCompile project(':resilience4j-consumer')
    testCompile project(':resilience4j-annotations')

    compileOnly "io.micronaut:micronaut-http"
    compileOnly "io.micronaut:micronaut-http-server"
    compileOnly "io.micronaut:micronaut-aop"
    compileOnly "io.micronaut:micronaut-inject"

    implementation "io.micronaut:micronaut-validation"
    implementation "io.micronaut:micronaut-router"

    testImplementation "io.micronaut:micronaut-aop"
    testImplementation "io.micronaut:micronaut-http-client"
    testImplementation "io.micronaut:micronaut-http-server-netty"
    testImplementation "io.micronaut:micronaut-inject-groovy"
    testImplementation "io.micronaut:micronaut-inject-java-test"

    testImplementation(libraries.micronaut_inject)
    testImplementation(libraries.micronaut_spock)

    testImplementation "cglib:cglib-nodep:3.3.0"
    testImplementation "org.objenesis:objenesis:3.1"

    testCompile(libraries.spock){
        exclude module:'groovy-all'
    }
    testImplementation (libraries.groovy_test)
    testImplementation "io.micronaut:micronaut-http-client"
    testImplementation "io.micronaut:micronaut-http-server-netty"
}
ext.moduleName = 'io.github.resilience4j.micronaut'
